<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jowon | Tech & Design Blog</title>
    <!-- Google Fonts: Inter & Noto Sans KR -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        /* * =========================================
         * 1. CSS Variables & Reset (style.css role)
         * =========================================
         */
        :root {
            /* Light Mode (Default) */
            --bg-color: #ffffff;
            --text-main: #111827;
            --text-muted: #6b7280;
            --primary: #2563eb;       /* Blue 600 */
            --primary-hover: #1d4ed8; /* Blue 700 */
            --accent: #f3f4f6;        /* Gray 100 */
            --border: #e5e7eb;        /* Gray 200 */
            --card-bg: #ffffff;
            --header-bg: rgba(255, 255, 255, 0.8);
            
            /* Spacing */
            --container-width: 1200px;
            --header-height: 70px;
        }

        /* Dark Mode Theme */
        [data-theme="dark"] {
            --bg-color: #111827;      /* Dark Gray 900 */
            --text-main: #f9fafb;     /* Gray 50 */
            --text-muted: #9ca3af;    /* Gray 400 */
            --primary: #3b82f6;       /* Blue 500 (Brighter for dark mode) */
            --primary-hover: #60a5fa; /* Blue 400 */
            --accent: #1f2937;        /* Gray 800 */
            --border: #374151;        /* Gray 700 */
            --card-bg: #1f2937;       /* Gray 800 */
            --header-bg: rgba(17, 24, 39, 0.8);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Noto Sans KR', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            line-height: 1.6;
            overflow-x: hidden;
            transition: background-color 0.3s, color 0.3s;
        }

        a { text-decoration: none; color: inherit; transition: color 0.2s; }
        ul { list-style: none; }
        button { cursor: pointer; border: none; background: none; font-family: inherit; }

        /* * =========================================
         * 2. Layout & Components
         * =========================================
         */
        
        /* Header */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: var(--header-height);
            background: var(--header-bg);
            backdrop-filter: blur(12px); /* Glassmorphism */
            border-bottom: 1px solid var(--border);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s, border-color 0.3s;
        }

        .nav-container {
            width: 100%;
            max-width: var(--container-width);
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 800;
            letter-spacing: -0.05em;
            color: var(--text-main);
        }

        /* GNB (Global Navigation Bar) */
        .gnb {
            display: flex;
            gap: 20px; /* 간격 조정 */
        }

        .gnb button {
            font-size: 0.95rem;
            font-weight: 500;
            color: var(--text-muted);
            padding: 8px 12px;
            border-radius: 6px;
            transition: all 0.2s;
        }

        .gnb button:hover, .gnb button.active {
            color: var(--primary);
            background-color: rgba(37, 99, 235, 0.05);
        }
        
        /* Dark mode specific hover adjustment */
        [data-theme="dark"] .gnb button:hover, 
        [data-theme="dark"] .gnb button.active {
            background-color: rgba(59, 130, 246, 0.15);
        }

        /* Theme Toggle Button */
        .theme-toggle-btn {
            color: var(--text-main);
            padding: 8px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
            margin-left: 10px;
        }

        .theme-toggle-btn:hover {
            background-color: var(--accent);
        }

        /* Mobile Menu Button */
        .mobile-menu-btn {
            display: none;
            color: var(--text-main);
        }

        /* Main Container */
        main {
            max-width: var(--container-width);
            margin: calc(var(--header-height) + 40px) auto 60px; /* Header height offset */
            padding: 0 20px;
            min-height: 80vh;
            animation: fadeIn 0.5s ease-out;
        }

        /* Sections (SPA Logic) */
        .page-section {
            display: none; /* Hidden by default */
        }
        .page-section.active {
            display: block; /* Show only active */
        }

        /* * =========================================
         * 3. Featured Post (Hero Section)
         * =========================================
         */
        .featured-post {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 80px;
            align-items: center;
        }

        .featured-image-wrapper {
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 20px 40px -10px rgba(0,0,0,0.1);
            cursor: pointer; /* Clickable indication */
        }

        .featured-image {
            width: 100%;
            height: auto;
            display: block;
            transition: transform 0.5s;
        }
        
        .featured-image-wrapper:hover .featured-image {
            transform: scale(1.03);
        }

        .featured-content .badge {
            display: inline-block;
            padding: 6px 12px;
            background-color: #eff6ff;
            color: var(--primary);
            font-size: 0.8rem;
            font-weight: 600;
            border-radius: 20px;
            margin-bottom: 16px;
            text-transform: uppercase;
        }
        
        [data-theme="dark"] .featured-content .badge {
            background-color: rgba(59, 130, 246, 0.2);
        }

        .featured-content h1 {
            font-size: 2.5rem;
            font-weight: 800;
            line-height: 1.2;
            margin-bottom: 16px;
            letter-spacing: -0.02em;
        }

        .featured-content p {
            font-size: 1.125rem;
            color: var(--text-muted);
            margin-bottom: 24px;
        }

        .read-more-btn {
            display: inline-flex;
            align-items: center;
            font-weight: 600;
            color: var(--primary);
            gap: 8px;
        }

        /* * =========================================
         * 4. Post Grid (3 Columns)
         * =========================================
         */
        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--accent);
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            transition: border-color 0.3s;
        }

        .post-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* 3 Columns Default */
            gap: 30px;
        }

        .post-card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s, background-color 0.3s, border-color 0.3s;
            display: flex;
            flex-direction: column;
            cursor: pointer;
        }

        .post-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.05);
            border-color: var(--primary);
        }
        
        [data-theme="dark"] .post-card:hover {
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }

        .card-image {
            width: 100%;
            height: 200px;
            background-color: var(--accent);
            object-fit: cover;
        }

        .card-body {
            padding: 24px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .card-meta {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 10px;
            line-height: 1.4;
        }

        .card-excerpt {
            font-size: 0.95rem;
            color: var(--text-muted);
            margin-bottom: 20px;
            flex-grow: 1;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        /* About Section */
        .profile-container {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
            padding: 40px 0;
        }
        
        .profile-img {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background-color: var(--accent);
            margin: 0 auto 30px;
            object-fit: cover;
        }
        
        .skills-container {
            text-align: left; 
            background: var(--accent); 
            padding: 30px; 
            border-radius: 12px; 
            max-width: 600px; 
            margin: 0 auto;
            transition: background-color 0.3s;
        }
        
        .skill-tag {
            background: var(--card-bg);
            padding: 6px 12px; 
            border-radius: 20px; 
            border: 1px solid var(--border); 
            font-size: 0.9rem;
            display: inline-block;
            transition: background-color 0.3s, border-color 0.3s;
        }

        /* Footer */
        footer {
            background-color: var(--accent);
            border-top: 1px solid var(--border);
            padding: 60px 0;
            margin-top: auto;
            transition: background-color 0.3s, border-color 0.3s;
        }

        .footer-content {
            max-width: var(--container-width);
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .social-links {
            display: flex;
            gap: 20px;
        }

        .social-links a {
            color: var(--text-muted);
            transition: color 0.2s;
        }

        .social-links a:hover { color: var(--primary); }

        /* * =========================================
         * 5. Modal (Full Screen View)
         * =========================================
         */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--bg-color); /* 테마 배경색 사용 */
            z-index: 2000;
            overflow-y: auto;
            animation: fadeIn 0.3s ease-out;
        }
        
        .modal-overlay.active {
            display: block;
        }

        .modal-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 80px 20px 100px; /* Header space and bottom padding */
            position: relative;
        }

        .modal-close-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 2010;
            background: rgba(0,0,0,0.1);
            border-radius: 50%;
            padding: 10px;
            color: var(--text-main);
            transition: background 0.2s;
        }
        
        [data-theme="dark"] .modal-close-btn {
            background: rgba(255,255,255,0.1);
        }

        .modal-close-btn:hover {
            background: rgba(0,0,0,0.2);
        }

        .modal-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .modal-category {
            color: var(--primary);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 10px;
            display: block;
        }

        .modal-title {
            font-size: 2.5rem;
            font-weight: 800;
            line-height: 1.2;
            margin-bottom: 20px;
            color: var(--text-main);
        }

        .modal-meta {
            color: var(--text-muted);
            font-size: 0.95rem;
        }

        .modal-image {
            width: 100%;
            height: auto;
            max-height: 500px;
            object-fit: cover;
            border-radius: 12px;
            margin-bottom: 40px;
            box-shadow: 0 20px 40px -10px rgba(0,0,0,0.1);
        }

        .modal-content-body {
            font-size: 1.125rem;
            line-height: 1.8;
            color: var(--text-main);
        }
        
        .modal-content-body p {
            margin-bottom: 1.5em;
        }

        /* * =========================================
         * 6. Responsive Design (Media Queries)
         * =========================================
         */
        
        /* Tablet (Max 1024px) */
        @media (max-width: 1024px) {
            .post-grid {
                grid-template-columns: repeat(2, 1fr); /* 2 Columns */
            }
        }

        /* Mobile (Max 768px) */
        @media (max-width: 768px) {
            :root {
                --header-height: 60px;
            }

            /* Featured Section Stack */
            .featured-post {
                grid-template-columns: 1fr;
                gap: 20px;
                margin-bottom: 50px;
            }

            .featured-content h1 {
                font-size: 2rem;
            }

            /* Grid 1 Column */
            .post-grid {
                grid-template-columns: 1fr;
            }

            /* Mobile Navigation */
            .mobile-menu-btn {
                display: block;
                margin-left: 10px;
            }

            .gnb {
                display: none; /* Hide default nav */
                position: absolute;
                top: var(--header-height);
                left: 0;
                width: 100%;
                background: var(--card-bg);
                flex-direction: column;
                padding: 20px;
                border-bottom: 1px solid var(--border);
                box-shadow: 0 10px 20px rgba(0,0,0,0.05);
            }

            .gnb.active {
                display: flex;
            }

            .footer-content {
                flex-direction: column;
                text-align: center;
            }

            /* Modal Responsive */
            .modal-title {
                font-size: 1.8rem;
            }
            .modal-container {
                padding-top: 60px;
            }
        }

        /* Animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

    <!-- Header -->
    <header>
        <div class="nav-container">
            <a href="#" onclick="router('home')" class="logo">Jowon.</a>
            
            <div style="display: flex; align-items: center;">
                <!-- GNB -->
                <nav class="gnb" id="gnb">
                    <button onclick="router('home')" class="active" data-page="home">Home</button>
                    <button onclick="router('technology')" data-page="technology">Technology</button>
                    <button onclick="router('design')" data-page="design">Design</button>
                    <button onclick="router('portfolio')" data-page="portfolio">Portfolio</button>
                    <button onclick="router('about')" data-page="about">About</button>
                </nav>

                <!-- Theme Toggle Button -->
                <button class="theme-toggle-btn" onclick="toggleTheme()" aria-label="Toggle Dark Mode">
                    <i data-lucide="moon" id="theme-icon"></i>
                </button>

                <!-- Mobile Menu Toggle -->
                <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                    <i data-lucide="menu"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <main id="app">
        
        <!-- 
           SECTION 1: HOME 
           - Featured Post (Top 1 from data)
           - Recent Posts Grid (Rest from data)
        -->
        <section id="home" class="page-section active">
            
            <!-- Featured Post (Content will be injected via JS) -->
            <article class="featured-post" id="featured-post-container">
                <!-- Skeleton Loading State -->
                <div class="featured-image-wrapper">
                    <img src="https://via.placeholder.com/600x400?text=Featured+Image" alt="Featured" class="featured-image">
                </div>
                <div class="featured-content">
                    <span class="badge">Featured</span>
                    <h1>Loading...</h1>
                    <p>Fetching insights...</p>
                </div>
            </article>

            <!-- Recent Posts Grid -->
            <div class="section-title">
                <span>Recent Posts</span>
                <a href="#" onclick="router('technology')" style="font-size: 0.9rem; color: var(--primary);">View All &rarr;</a>
            </div>
            
            <div class="post-grid" id="recent-posts-grid">
                <!-- Grid items injected via JS -->
            </div>
        </section>


        <!-- 
           SECTION 2: TECHNOLOGY 
           - Filtered List (item == technology)
        -->
        <section id="technology" class="page-section">
            <div class="section-title">Technology & Development</div>
            <div class="post-grid" id="tech-grid"></div>
        </section>


        <!-- 
           SECTION 3: DESIGN 
           - Filtered List (item == design)
        -->
        <section id="design" class="page-section">
            <div class="section-title">Design & System</div>
            <div class="post-grid" id="design-grid"></div>
        </section>


        <!-- 
           SECTION 4: PORTFOLIO 
           - Filtered List (item == portpolio)
        -->
        <section id="portfolio" class="page-section">
            <div class="section-title">Project Portfolio</div>
            <div class="post-grid" id="portfolio-grid"></div>
        </section>


        <!-- 
           SECTION 5: ABOUT 
           - Profile
        -->
        <section id="about" class="page-section">
            <div class="profile-container">
                <!-- Profile Image: Reads from image/profile.jpg -->
                <img src="image/profile.jpg" onerror="this.src='https://ui-avatars.com/api/?name=Jowon&background=2563eb&color=fff&size=200'" alt="Jowon" class="profile-img">
                
                <h1 style="font-size: 2.5rem; font-weight: 800; margin-bottom: 20px;">Hello, I'm Jowon.</h1>
                <p style="font-size: 1.2rem; color: var(--text-muted); margin-bottom: 40px; max-width: 600px; margin-left: auto; margin-right: auto;">
                    IT, Cloud, AI 및 데이터 기반 기술에 대한 깊이 있는 통찰을 공유합니다.<br>
                    사용자 경험을 중요시하는 개발자이자 분석가입니다.
                </p>
                
                <div style="display: flex; gap: 20px; justify-content: center; margin-bottom: 40px;">
                    <a href="mailto:sowokim777@gmail.com" style="padding: 12px 24px; background: var(--text-main); color: #ffffff; border-radius: 8px; font-weight: 600;">Contact Me</a>
                    <a href="https://github.com/sowokim777" target="_blank" style="padding: 12px 24px; border: 1px solid var(--border); border-radius: 8px; font-weight: 600;">Github Profile</a>
                </div>

                <div class="skills-container">
                    <h3 style="margin-bottom: 15px; font-weight: 700;">Skills</h3>
                    <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                        <span class="skill-tag">Node.js</span>
                        <span class="skill-tag">React</span>
                        <span class="skill-tag">AWS/Cloud</span>
                        <span class="skill-tag">Python</span>
                        <span class="skill-tag">Data Analysis</span>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Post Detail Modal (Full Screen) -->
    <div id="post-modal" class="modal-overlay">
        <button class="modal-close-btn" onclick="closePostModal()">
            <i data-lucide="x"></i>
        </button>
        <div class="modal-container">
            <div class="modal-header">
                <span class="modal-category" id="modal-category">Category</span>
                <h1 class="modal-title" id="modal-title">Post Title Placeholder</h1>
                <div class="modal-meta" id="modal-date">2025-12-01</div>
            </div>
            
            <img src="" alt="Post Image" class="modal-image" id="modal-image">
            
            <div class="modal-content-body" id="modal-content">
                <!-- Content injected via JS -->
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-logo">
                <span style="font-weight: 800; font-size: 1.2rem;">Jowon.Log</span>
                <p style="font-size: 0.9rem; color: var(--text-muted); margin-top: 5px;">
                    Sharing knowledge about Tech & Design.
                </p>
            </div>
            <div class="social-links">
                <a href="https://github.com/sowokim777" aria-label="Github"><i data-lucide="github"></i></a>
                <a href="mailto:sowokim777@gmail.com" aria-label="Email"><i data-lucide="mail"></i></a>
                <a href="#" aria-label="Twitter"><i data-lucide="twitter"></i></a>
            </div>
            <div style="font-size: 0.85rem; color: var(--text-muted);">
                &copy; 2025 Jowon. All rights reserved.
            </div>
        </div>
    </footer>

    <!-- 
      =========================================
      6. JavaScript (Logic & Data)
      =========================================
    -->
    <script>
        // Initialize Icons
        lucide.createIcons();

        /* --- 1. Data Source (Parsed from item.csv) --- */
        // item, category, title, content, date
        const postsData = [
            { 
                id: 1, 
                item: 'design', 
                category: 'ui/ux', 
                title: '마이크로 인터렉션의 힘', 
                content: '사용자 경험 향상 애니메이션. 작은 움직임이 큰 차이를 만듭니다. 버튼을 눌렀을 때의 반응, 화면 전환 시의 부드러움 등 마이크로 인터렉션은 사용자가 제품과 소통하고 있다는 느낌을 줍니다. 본문에서는 성공적인 마이크로 인터렉션 사례와 구현 방법을 상세히 다룹니다.', 
                date: '2025-12-01', 
                img: 'https://images.unsplash.com/photo-1561070791-2526d30994b5?auto=format&fit=crop&w=800&q=80' 
            },
            { 
                id: 2, 
                item: 'design', 
                category: 'system', 
                title: '디자인 시스템 구축 실패기', 
                content: '토큰 네이밍 부터 배포 까지. 디자인 시스템은 단순히 컴포넌트를 모아두는 것이 아닙니다. 디자이너와 개발자 간의 약속이자 언어입니다. 초기 구축 과정에서의 시행착오, 잘못된 추상화로 인한 문제점, 그리고 이를 극복하고 안정적인 시스템을 구축하게 된 과정을 공유합니다.', 
                date: '2025-12-02', 
                img: 'https://images.unsplash.com/photo-1581291518633-83b4ebd1d83e?auto=format&fit=crop&w=800&q=80' 
            },
            { 
                id: 3, 
                item: 'technology', 
                category: 'backend', 
                title: 'Node.js 이벤트 루프 완벽 가이드', 
                content: '싱글 스레드 환경 비동기 처리. Node.js의 핵심인 이벤트 루프의 6단계(Timer, I/O callbacks, Idle/Prepare, Poll, Check, Close callbacks)를 상세히 분석합니다. `process.nextTick`과 `Promise` 마이크로태스크가 언제 실행되는지, 그리고 이벤트 루프를 차단하지 않기 위한 모범 사례를 알아봅니다.', 
                date: '2025-12-03', 
                img: 'https://images.unsplash.com/photo-1627398242454-45a1465c2479?auto=format&fit=crop&w=800&q=80' 
            },
            { 
                id: 4, 
                item: 'technology', 
                category: 'frontend', 
                title: 'React 19 컴파일러 도입기', 
                content: '수동 메모이제이션의 종말? React 19와 함께 도입된 React Compiler는 `useMemo`와 `useCallback`을 수동으로 작성할 필요를 없애줍니다. 컴파일러가 자동으로 의존성을 파악하고 최적화 코드를 생성하는 원리와, 실제 프로젝트에 도입했을 때의 성능 향상 수치를 공개합니다.', 
                date: '2025-12-04', 
                img: 'https://images.unsplash.com/photo-1633356122544-f134324a6cee?auto=format&fit=crop&w=800&q=80' 
            },
            { 
                id: 5, 
                item: 'technology', 
                category: 'devops', 
                title: '서버리스 아키텍처 비용 최적화', 
                content: 'AWS Lambda 비용 절감. 서버리스는 사용한 만큼만 비용을 내지만, 잘못 설계하면 예상을 뛰어넘는 비용이 청구될 수 있습니다. 콜드 스타트 최적화, 메모리 할당 전략, 그리고 Provisioned Concurrency의 올바른 사용법을 통해 비용을 40% 절감한 사례를 소개합니다.', 
                date: '2025-12-05', 
                img: 'https://images.unsplash.com/photo-1451187580459-43490279c0fa?auto=format&fit=crop&w=800&q=80' 
            },
            { 
                id: 6, 
                item: 'portpolio', 
                category: 'web', 
                title: '타로점 웹 앱', 
                content: '웹 기반의 타로점 앱. 사용자가 카드를 선택하면 뒤집히는 3D 애니메이션 효과와 해석 알고리즘을 구현했습니다. Three.js를 활용한 카드 렌더링 최적화 기법과 모바일 터치 이벤트 처리 노하우를 담았습니다.', 
                date: '2025-12-06', 
                img: 'https://images.unsplash.com/photo-1534088568595-a066f410bcda?auto=format&fit=crop&w=800&q=80' 
            },
            { 
                id: 7, 
                item: 'portpolio', 
                category: 'python', 
                title: '테트리스 코드', 
                content: '파이선 테트리스. Pygame 라이브러리를 사용하여 클래식 테트리스를 구현했습니다. 블록 충돌 감지 알고리즘, 라인 삭제 로직, 그리고 점수 계산 시스템을 객체 지향적으로 설계하는 방법을 단계별로 설명합니다.', 
                date: '2025-12-07', 
                img: 'https://images.unsplash.com/photo-1555949963-aa79dcee981c?auto=format&fit=crop&w=800&q=80' 
            }
        ];

        /* --- 2. Render Functions --- */

        // 카드 HTML 생성 헬퍼
        function createCardHTML(post) {
            return `
                <article class="post-card" onclick="openPostModal(${post.id})">
                    <img src="${post.img}" alt="${post.title}" class="card-image" loading="lazy">
                    <div class="card-body">
                        <div class="card-meta">
                            <span style="color:var(--primary); font-weight:600; text-transform:uppercase;">${post.category}</span>
                            <span>${post.date}</span>
                        </div>
                        <h3 class="card-title">${post.title}</h3>
                        <p class="card-excerpt">${post.content}</p>
                        <div style="margin-top:auto; font-weight:600; font-size:0.9rem; color:var(--primary);">
                            Read Article &rarr;
                        </div>
                    </div>
                </article>
            `;
        }

        // 초기 렌더링
        function init() {
            // Theme Init
            initTheme();

            // 1. Home 화면 구성
            // Featured Post: 가장 최신 글 (날짜순 정렬 후 첫 번째)
            const sortedPosts = [...postsData].sort((a,b) => new Date(b.date) - new Date(a.date));
            const featured = sortedPosts[0];
            
            const featuredContainer = document.getElementById('featured-post-container');
            featuredContainer.innerHTML = `
                <div class="featured-image-wrapper" onclick="openPostModal(${featured.id})">
                    <img src="${featured.img}" alt="${featured.title}" class="featured-image">
                </div>
                <div class="featured-content">
                    <span class="badge">${featured.item} / ${featured.category}</span>
                    <h1>${featured.title}</h1>
                    <p>${featured.content.substring(0, 100)}...</p>
                    <button class="read-more-btn" onclick="openPostModal(${featured.id})">
                        Read Full Story <i data-lucide="arrow-right"></i>
                    </button>
                </div>
            `;
            lucide.createIcons();

            // Recent Grid: Featured를 제외한 나머지
            const others = sortedPosts.slice(1);
            document.getElementById('recent-posts-grid').innerHTML = others.map(createCardHTML).join('');

            // 2. 섹션별 데이터 필터링 & 렌더링
            
            // Technology
            const techPosts = postsData.filter(p => p.item === 'technology');
            document.getElementById('tech-grid').innerHTML = techPosts.map(createCardHTML).join('');

            // Design
            const designPosts = postsData.filter(p => p.item === 'design');
            document.getElementById('design-grid').innerHTML = designPosts.map(createCardHTML).join('');

            // Portfolio (CSV 오타 'portpolio' 대응)
            const portfolioPosts = postsData.filter(p => p.item === 'portpolio' || p.item === 'portfolio');
            document.getElementById('portfolio-grid').innerHTML = portfolioPosts.map(createCardHTML).join('');
        }

        /* --- 3. SPA Router Logic --- */
        function router(pageId) {
            // 1. 네비게이션 활성화 상태 변경
            document.querySelectorAll('.gnb button').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.page === pageId) btn.classList.add('active');
            });

            // 2. 섹션 표시 전환 (Show/Hide)
            document.querySelectorAll('.page-section').forEach(section => {
                section.classList.remove('active');
            });
            
            const targetSection = document.getElementById(pageId);
            if (targetSection) {
                targetSection.classList.add('active');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            // 모바일 메뉴 닫기
            document.getElementById('gnb').classList.remove('active');
        }

        /* --- 4. Mobile Menu --- */
        function toggleMobileMenu() {
            const gnb = document.getElementById('gnb');
            gnb.classList.toggle('active');
        }

        /* --- 5. Theme Toggle Logic (Dark/Light) --- */
        function initTheme() {
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
                document.documentElement.setAttribute('data-theme', 'dark');
                updateThemeIcon(true);
            } else {
                document.documentElement.setAttribute('data-theme', 'light');
                updateThemeIcon(false);
            }
        }

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcon(newTheme === 'dark');
        }

        function updateThemeIcon(isDark) {
            const icon = document.getElementById('theme-icon');
            if (isDark) {
                icon.setAttribute('data-lucide', 'sun');
            } else {
                icon.setAttribute('data-lucide', 'moon');
            }
            lucide.createIcons();
        }

        /* --- 6. Post Modal Logic (NEW) --- */
        function openPostModal(id) {
            const post = postsData.find(p => p.id === id);
            if (!post) return;

            // Fill Data
            document.getElementById('modal-category').innerText = `${post.item} / ${post.category}`;
            document.getElementById('modal-title').innerText = post.title;
            document.getElementById('modal-date').innerText = post.date;
            document.getElementById('modal-image').src = post.img;
            
            // 본문 내용 포맷팅 (단락 분리 등 간단한 처리)
            // 실제 구현 시엔 마크다운 파서 등을 사용할 수 있음
            document.getElementById('modal-content').innerHTML = `<p>${post.content}</p>`;

            // Show Modal
            document.getElementById('post-modal').classList.add('active');
            document.body.style.overflow = 'hidden'; // 배경 스크롤 방지
        }

        function closePostModal() {
            document.getElementById('post-modal').classList.remove('active');
            document.body.style.overflow = ''; // 배경 스크롤 복구
        }

        // Close modal on ESC key
        document.addEventListener('keydown', function(event) {
            if (event.key === "Escape") {
                closePostModal();
            }
        });

        // 실행
        document.addEventListener('DOMContentLoaded', init);

    </script>
</body>
</html>






